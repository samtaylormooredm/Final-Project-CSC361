<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Climate Concern Choropleth</title>
  <script src="https://d3js.org/d3.v4.min.js"></script>
  <link href="https://cdnjs.cloudflare.com/ajax/libs/intro.js/7.2.0/introjs.css" rel="stylesheet">
  <link rel="stylesheet" href="styles.css">
</head>
<body>
<!-- Intro.Js Tour -->
<div id="welcome-modal" style="display:none; position: fixed; top: 30%; left: 50%; transform: translate(-50%, -50%);
background: white; border: 1px solid #ccc; padding: 20px; z-index: 9999; box-shadow: 0 2px 10px rgba(0,0,0,0.2);">
<h3>Welcome!</h3>
<p>Click below to take a tour of this visualization.</p>
<button id="start-tour-btn" style="margin-top: 10px;">Start Tour</button>
</div>
  <!-- Title and instructions -->
  <div class="title-container">
    <h1>Estimated % of adults who are worried about global warming</h1>
    <p>
      Click and slide over the slider to see a map of each year. Click 
      <span class="play-icon">▶</span> to see an animation of the state populations' opinions over time. 
      Hover over each state to see a chart of the population's opinion over time.
    </p>
  </div>

  <!-- Controls (Slider + Label + Play) -->
  <div class="controls">
    <div id="year-label">Year: </div>
    <div class="slider-container">
      <input type="range" id="year-slider" data-intro="Click and slide over the slider to see a map of each year" data-title="Year Selector" data-step="1">
      <button id="play-button" data-title="Play Button" data-intro="Click here to see an animation of the state populations' opinions over time." data-step="2">▶ Play</button>
    </div>
  </div>

  <!-- Map and Chart Layout -->
  <div class="map-chart-wrapper">
    <div id="map-container"
    data-intro="Hover over any state to see its data. Click a state to view its trend."
    data-step="3">
    
      <svg id="map" width="800" height="500">
        <defs>
          <!-- Softer glow for hover -->
          <filter id="hover-glow">
            <feDropShadow dx="0" dy="0" stdDeviation="2" flood-color="#FFFFED" flood-opacity="0.8"/>
          </filter>
        
          <!-- Stronger glow for selected state -->
          <filter id="selected-glow">
            <feDropShadow dx="0" dy="0" stdDeviation="3" flood-color="#FFD700" flood-opacity="1"/>
          </filter>
        </defs>
      </svg>
    </div>
    <div id="legend-container"
    data-title="Color Legend"
     data-intro="These color bins represent percentage ranges. Click to filter."
     data-step="4">

      <!-- Legend will go here using D3 -->
    </div>
    <div id="line-chart-container"
    data-title="Trend View"
     data-intro="Clicking a state shows its opinion trend here over time."
     data-step="5">
      <!-- Line chart renders here -->
    </div>
    </div>
  </div>

  <!-- Tooltip -->
  <div class="tooltip" id="tooltip"></div>

  <!-- Main script -->
  <script src="main.js"></script>

  <div id="popup-warning" style="
  display: none;
  position: fixed;
  bottom: 20px;
  left: 50%;
  transform: translateX(-50%);
  background-color: #ffefc5;
  color: #333;
  padding: 10px 18px;
  border: 1px solid #e0c177;
  border-radius: 6px;
  font-size: 15px;
  z-index: 1000;
  box-shadow: 0px 2px 8px rgba(0,0,0,0.15);
  transition: opacity 0.3s ease;
">
  Pause animation to select a state.
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/intro.js/7.2.0/intro.min.js"></script>
</body>
</html>